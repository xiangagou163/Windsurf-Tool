<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com; style-src 'self' 'unsafe-inline' *; frame-src *; img-src * data:; connect-src *; font-src *;">
  <script src="./node_modules/lucide/dist/umd/lucide.min.js"></script>
  <title>Windsurf-Tool 6.4.1</title>
  <style>
    /* --- 全局变量 --- */
    :root {
      --primary: #2563eb;
      --primary-hover: #1d4ed8;
      --primary-light: #eff6ff;
      --bg-body: #f8fafc;
      --bg-sidebar: rgba(255, 255, 255, 0.95);
      --bg-card: #ffffff;
      --text-main: #0f172a;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --radius-md: 6px;
      --radius-lg: 8px;
      --radius-xl: 16px;
      --font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-font-smoothing: antialiased;
    }

    body {
      font-family: var(--font-family);
      background: var(--bg-body);
      font-size: 14px;
      color: var(--text-main);
      line-height: 1.5;
      height: 100vh;
      overflow: hidden;
    }

    /* 账号管理视图使用紧凑字体 */
    #register { font-size: 13px; }

    .app-container {
      display: flex;
      height: 100vh;
      width: 100vw;
    }

    /* 左侧导航栏 */
    .sidebar {
      width: 240px;
      background: var(--bg-sidebar);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      z-index: 50;
    }

    .sidebar-header {
      padding: 20px;
      border-bottom: 1px solid transparent;
      -webkit-app-region: drag; /* Windows 拖动区域 */
    }
    
    .sidebar-header * {
      -webkit-app-region: no-drag; /* 按钮等元素不可拖动 */
    }

    .app-logo {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 6px;
    }

    .app-logo-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      overflow: hidden;
    }
    
    .app-logo-icon img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .app-logo-text {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-main);
    }

    .app-version {
      font-size: 11px;
      color: var(--text-muted);
      padding-left: 42px;
    }

    .free-badge {
      background: rgba(34, 197, 94, 0.1);
      color: #16a34a;
      font-size: 10px;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(34, 197, 94, 0.2);
    }

    .sidebar-nav {
      flex: 1;
      padding: 12px;
      overflow-y: auto;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      margin-bottom: 4px;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.2s;
      color: var(--text-muted);
      font-size: 13px;
      font-weight: 500;
      border: none;
      background: transparent;
      width: 100%;
      text-align: left;
    }

    .nav-item:hover {
      background: rgba(0, 0, 0, 0.03);
      color: var(--text-main);
    }

    .nav-item.active {
      background: var(--primary-light);
      color: var(--primary);
      font-weight: 600;
    }

    .nav-item-icon {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
    }

    .nav-item.active .nav-item-icon {
      color: var(--primary);
    }

    .sidebar-footer {
      padding: 16px;
      border-top: 1px solid var(--border);
    }

    .footer-links {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .footer-link {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-muted);
      text-decoration: none;
      padding: 6px 8px;
      border-radius: var(--radius-md);
      transition: all 0.2s;
      border: none;
      background: transparent;
      width: 100%;
      text-align: left;
      cursor: pointer;
    }

    .footer-link:hover {
      background: rgba(0, 0, 0, 0.03);
      color: var(--text-main);
    }

    .footer-link-icon {
      width: 16px;
      height: 16px;
      color: var(--text-muted);
    }

    /* 右侧主内容区 */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: var(--bg-body);
      overflow: hidden;
      position: relative;
    }

    .content-header {
      padding: 24px 32px;
      background: rgba(248, 250, 252, 0.8);
      backdrop-filter: blur(8px);
      position: sticky;
      top: 0;
      z-index: 40;
      display: flex;
      flex-direction: column;
    }

    .content-title {
      font-size: 26px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 12px;
      letter-spacing: -0.5px;
    }

    .content-title-icon {
      width: 28px;
      height: 28px;
      color: var(--primary);
    }

    .content-subtitle {
      font-size: 14px;
      color: var(--text-muted);
      margin-left: 40px;
    }

    .content-body {
      flex: 1;
      padding: 24px 32px 32px 32px;
      overflow-y: auto;
    }

    .view-content {
      display: none;
      height: 100%;
      flex-direction: column;
      animation: fadeIn 0.2s ease;
    }

    .view-content.active {
      display: flex;
    }

    /* 设置、教程、自动绑卡视图使用block布局 */
    #settings.view-content.active,
    #tutorial.view-content.active,
    #autoBindCard.view-content.active {
      display: block;
      overflow-y: auto;
      padding: 32px 40px;
    }

    /* 设置页面样式 */
    #settings .settings-wrapper,
    #autoBindCard .settings-wrapper {
      max-width: 800px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    /* 教程页面样式 */
    #tutorial .tutorial-article {
      max-width: 720px;
      margin: 0 auto;
      font-size: 14px;
    }

    /* === 紧凑顶部栏 (Compact Header) === */
    .compact-header {
      flex-shrink: 0;
      background: #ffffff;
      border-bottom: 1px solid #f5f5f5;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 60px;
      z-index: 20;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    /* 当前登录状态 - 简洁版 */
    .current-login-card {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 13px;
    }
    
    /* 状态指示点 */
    .login-status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #34c759;
      flex-shrink: 0;
    }
    .login-status-dot.offline {
      background: #8e8e93;
    }
    
    /* 登录信息 */
    .login-info {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .login-email {
      color: var(--text-main);
      max-width: 180px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .login-type-tag {
      color: #86868b;
    }
    
    /* 分隔线 */
    .login-divider {
      width: 1px;
      height: 16px;
      background: var(--border);
    }
    
    /* 积分区域 */
    .credits-section {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .credits-label {
      color: #86868b;
    }
    .credits-used-num {
      color: #86868b;
    }
    .credits-slash {
      color: #c7c7cc;
    }
    .credits-total-num {
      color: #86868b;
    }
    
    /* 进度条 - 隐藏 */
    .credits-progress-wrapper {
      display: none;
    }
    .credits-progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #34c759 0%, #ffcc00 50%, #ff9500 75%, #ff3b30 100%);
      transition: width 0.5s ease;
      border-radius: 0 2px 2px 0;
    }
    
    .header-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* 工具栏输入框 */
    .toolbar-input-group {
      display: flex;
      align-items: center;
      background: #f1f5f9;
      border-radius: var(--radius-md);
      padding: 2px;
      border: 1px solid var(--border);
    }
    .toolbar-input-group .mini-input {
      width: 50px;
      background: transparent;
      border: none;
      font-size: 12px;
      text-align: center;
      padding: 4px;
      color: var(--text-main);
    }
    .toolbar-input-group .mini-input:focus { outline: none; }
    .input-divider { width: 1px; height: 16px; background: #cbd5e1; }

    /* 紧凑按钮 */
    .compact-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: var(--radius-md);
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      border: 1px solid transparent;
      transition: all 0.2s;
      height: 32px;
      white-space: nowrap;
    }
    .compact-btn-primary { background: var(--primary); color: white; }
    .compact-btn-primary:hover { background: var(--primary-hover); }
    
    .compact-btn-ghost { background: transparent; color: var(--text-muted); border: 1px solid var(--border); }
    .compact-btn-ghost:hover { background: #f8fafc; color: var(--text-main); border-color: #cbd5e1; }
    
    .compact-btn-danger { color: #ef4444; border: 1px solid var(--border); background: transparent; }
    .compact-btn-danger:hover { background: #fef2f2; border-color: #fecaca; }

    .icon-only-btn { padding: 6px; width: 32px; justify-content: center; }

    /* === 账号列表区域 === */
    .grid-container {
      flex: 1;
      padding: 0;
      overflow: hidden;
      background: var(--bg-body);
      position: relative;
    }

    /* 列表内按钮 */
    .table-action-btn {
      padding: 4px;
      border-radius: 4px;
      color: var(--text-muted);
      border: none; 
      background: transparent; 
      cursor: pointer;
    }
    .table-action-btn:hover { background: #e2e8f0; color: var(--text-main); }
    .table-action-btn.delete:hover { background: #fee2e2; color: #ef4444; }

    /* 文章样式 */
    .tutorial-article {
      max-width: 720px;
      margin: 0 auto;
      padding: 20px 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      line-height: 1.8;
      color: #333;
    }
    .tutorial-article h1 {
      font-size: 28px;
      font-weight: 700;
      color: #1d1d1f;
      margin-bottom: 32px;
      padding-bottom: 16px;
      border-bottom: 1px solid #e5e5e5;
    }
    .tutorial-article h2 {
      font-size: 20px;
      font-weight: 600;
      color: #1d1d1f;
      margin: 32px 0 16px 0;
    }
    .tutorial-article h3 {
      font-size: 15px;
      font-weight: 600;
      color: #444;
      margin: 20px 0 10px 0;
    }
    .tutorial-article p {
      font-size: 14px;
      color: #555;
      margin-bottom: 12px;
    }
    .tutorial-article ul, .tutorial-article ol {
      font-size: 14px;
      color: #555;
      margin: 0 0 16px 20px;
      padding: 0;
    }
    .tutorial-article li {
      margin-bottom: 6px;
    }
    .tutorial-article code {
      background: #f5f5f7;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: "SF Mono", Monaco, monospace;
      font-size: 13px;
      color: #007aff;
    }
    .tutorial-article blockquote {
      margin: 16px 0;
      padding: 12px 16px;
      background: #f9f9f9;
      border-left: 3px solid #007aff;
      font-size: 13px;
      color: #666;
      border-radius: 0 8px 8px 0;
    }
    .tutorial-article a {
      color: #007aff;
      text-decoration: none;
    }
    .tutorial-article a:hover {
      text-decoration: underline;
    }
    .tutorial-article section {
      margin-bottom: 24px;
    }
    .tutorial-article strong {
      color: #1d1d1f;
    }

    /* --- 设置页面专属优化样式 --- */
    .settings-wrapper {
      max-width: 800px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .settings-section-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
      margin-left: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .settings-card-new {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      transition: box-shadow 0.2s;
    }
    
    .settings-card-new:hover {
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      border-color: #cbd5e1;
    }

    .setting-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .setting-full-row {
      width: 100%;
    }

    .setting-input-wrapper {
      position: relative;
    }

    .setting-input-wrapper input,
    .setting-input-wrapper select,
    .setting-input {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 13px;
      background: #fff;
      transition: all 0.2s;
      color: var(--text-main);
    }

    .setting-input-wrapper input:focus,
    .setting-input-wrapper select:focus,
    .setting-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      background: #fafbff;
    }

    .setting-input::placeholder {
      color: #94a3b8;
    }

    .setting-input:hover:not(:focus) {
      border-color: #cbd5e1;
    }

    /* 优化的输入框样式 */
    .input-modern {
      width: 100%;
      padding: 10px 14px;
      border: 1.5px solid #e2e8f0;
      border-radius: 10px;
      font-size: 13px;
      background: linear-gradient(to bottom, #fafbfc, #ffffff);
      transition: all 0.2s ease;
      color: #1e293b;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
    }

    .input-modern:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15), 0 1px 2px rgba(0, 0, 0, 0.04);
      background: #ffffff;
    }

    .input-modern::placeholder {
      color: #94a3b8;
    }

    .input-modern:hover:not(:focus) {
      border-color: #cbd5e1;
      background: #ffffff;
    }

    /* input 输入框确保无背景图 */
    input.setting-input,
    input.input-modern {
      background-image: none !important;
    }

    /* select 下拉框优化 */
    select.setting-input,
    select.input-modern {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      background-color: #fff;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat !important;
      background-position: right 12px center;
      background-size: 12px;
      padding-right: 36px;
      cursor: pointer;
    }

    select.setting-input:focus,
    select.input-modern:focus {
      background-color: #fafbff;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%233b82f6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat !important;
      background-position: right 12px center;
      background-size: 12px;
    }

    .setting-label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      color: var(--text-main);
      margin-bottom: 8px;
    }

    .setting-helper {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 6px;
      line-height: 1.4;
    }

    .tags-container {
      margin-top: 16px;
      padding: 12px;
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: 8px;
      min-height: 48px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .path-display-group {
      margin-bottom: 16px;
    }
    .path-display-group:last-child {
      margin-bottom: 0;
    }
    
    .path-input-readonly {
      width: 100%;
      padding: 10px 12px;
      background-color: #f1f5f9 !important;
      font-family: 'SF Mono', Monaco, Consolas, monospace;
      font-size: 11px !important;
      color: #475569 !important;
      border: 1px solid #e2e8f0 !important;
      border-radius: 8px;
      cursor: text;
      user-select: all;
      overflow-x: auto;
      white-space: nowrap;
    }

    .platform-badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 12px;
      background: linear-gradient(135deg, #007aff, #5ac8fa);
      color: white;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      box-shadow: 0 2px 4px rgba(0, 113, 227, 0.2);
    }
    
    .domain-tag {
      background: white;
      color: var(--text-main);
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 6px;
      border: 1px solid var(--border);
      box-shadow: 0 1px 2px rgba(0,0,0,0.03);
    }
    .domain-tag button {
      background: none;
      border: none;
      color: #94a3b8;
      cursor: pointer;
      display: flex;
      align-items: center;
    }
    .domain-tag button:hover { color: #ef4444; }

    .save-config-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      background: #10b981;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
      transition: all 0.2s ease;
      z-index: 100;
    }
    .save-config-btn:hover {
      background: #059669;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
    }

    /* 统一控制面板 */
    .unified-panel {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px 20px;
      margin-bottom: 16px;
    }
    .panel-top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
      padding-bottom: 14px;
      border-bottom: 1px solid var(--border);
    }
    .current-account-info {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 4px;
    }
    .panel-stats {
      display: flex;
      gap: 16px;
      font-size: 13px;
    }
    .panel-stats span {
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .panel-stats b {
      font-weight: 600;
    }
    .panel-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }
    .toolbar-left, .toolbar-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-group label {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-weight: 500;
      font-size: 13px;
      color: var(--text-main);
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px 14px;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      font-size: 14px;
      background: #f8fafc;
      font-family: inherit;
      color: var(--text-main);
      transition: all 0.2s;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      background: #fff;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
    }

    .btn {
      padding: 9px 18px;
      border: 1px solid transparent;
      border-radius: var(--radius-md);
      font-size: 13px;
      font-weight: 500;
      letter-spacing: 0.3px;
      cursor: pointer;
      margin-right: 8px;
      font-family: inherit;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .btn:active {
      transform: translateY(1px);
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-hover);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25);
    }

    .btn-primary:active {
      background: #1e40af;
    }

    .btn-danger {
      background: #ef4444;
      color: white;
    }

    .btn-danger:hover {
      background: #dc2626;
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.25);
    }

    .btn-danger:active {
      background: #b91c1c;
    }

    .btn-success {
      background: #10b981;
      color: white;
    }

    .btn-success:hover {
      background: #059669;
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);
    }

    .btn-success:active {
      background: #047857;
    }

    .btn-warning {
      background: #f59e0b;
      color: white;
    }

    .btn-warning:hover {
      background: #d97706;
      box-shadow: 0 4px 12px rgba(245, 158, 11, 0.25);
    }

    .btn-warning:active {
      background: #b45309;
    }


    /* 账号列表 - 自动填充剩余空间 */
    .accounts-grid {
      height: 100%;
      width: 100%;
      overflow-y: auto;
      overflow-x: auto;
      border: none;
      background: var(--bg-card);
    }

    .account-item {
      display: flex;
      align-items: center;
      padding: 8px 16px;
      border-bottom: none;
      font-size: 12px;
      transition: background 0.1s;
      min-height: 38px;
      background: transparent;
    }

    .account-item:last-child {
      border-bottom: none;
    }

    .account-item:hover {
      background: #f1f5f9 !important;
    }

    /* 隔行变色 */
    .account-item:nth-child(even):not(.header) {
      background: #fafafa;
    }

    .account-item.header {
      position: sticky;
      top: 0;
      z-index: 10;
      background: #ffffff;
      border-bottom: 1px solid var(--border);
      font-size: 11px;
      text-transform: uppercase;
      color: var(--text-muted);
      font-weight: 600;
      padding: 10px 16px;
      min-height: 38px;
    }

    .account-item.header:hover {
      background: #ffffff !important;
    }

    /* 列定义 */
    .acc-col {
      padding: 0 8px;
      overflow: visible;
      white-space: nowrap;
      display: flex;
      align-items: center;
    }

    .acc-col-index {
      width: 40px;
      flex-shrink: 0;
      color: #86868b;
      font-weight: 500;
      justify-content: center;
      font-size: 12px;
    }

    .acc-col-email {
      width: 200px;
      min-width: 200px;
      flex-shrink: 0;
      color: var(--text-main);
      font-weight: 500;
      cursor: pointer;
      font-size: 12px;
    }

    .acc-col-email:hover {
      color: var(--text-main);
    }

    .acc-col-password {
      width: 120px;
      min-width: 120px;
      flex-shrink: 0;
      gap: 4px;
    }

    .password-display {
      font-family: 'SF Mono', Monaco, monospace;
      color: var(--text-muted);
      font-size: 11px;
      cursor: pointer;
      background: #f1f5f9;
      padding: 2px 6px;
      border-radius: 4px;
    }

    .password-display:hover {
      color: var(--text-main);
    }

    .password-toggle {
      background: none;
      border: none;
      padding: 2px;
      cursor: pointer;
      color: #86868b;
      display: flex;
      align-items: center;
      border-radius: 3px;
    }

    .password-toggle:hover {
      background: #e8e8ed;
      color: #1d1d1f;
    }

    .acc-col-type {
      width: 55px;
      flex-shrink: 0;
      justify-content: center;
      font-size: 11px;
      color: #6e6e73;
      font-weight: 500;
    }

    .acc-col-credits {
      width: 65px;
      flex-shrink: 0;
      justify-content: flex-end;
      font-weight: 500;
      color: #1d1d1f;
      font-variant-numeric: tabular-nums;
      font-size: 11px;
    }

    .acc-col-used {
      width: 65px;
      flex-shrink: 0;
      justify-content: flex-end;
      font-weight: 500;
      color: #6e6e73;
      font-variant-numeric: tabular-nums;
      font-size: 11px;
    }

    .acc-col-usage {
      width: 65px;
      flex-shrink: 0;
      justify-content: flex-end;
      font-weight: 500;
      color: #1d1d1f;
      font-variant-numeric: tabular-nums;
      font-size: 11px;
    }

    .acc-col-expiry {
      width: 90px;
      flex-shrink: 0;
      color: #6e6e73;
      font-size: 11px;
    }

    .acc-col-status {
      width: 75px;
      flex-shrink: 0;
      justify-content: center;
      font-weight: 500;
      font-size: 11px;
    }

    .acc-col-note {
      width: 100px;
      flex-shrink: 0;
      font-size: 11px;
      color: #86868b;
      cursor: pointer;
    }
    .acc-col-note:hover .note-text {
      color: #007aff;
    }
    .acc-col-note .note-text {
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .acc-col-note .note-input {
      width: 100%;
      padding: 2px 6px;
      border: 1px solid #007aff;
      border-radius: 4px;
      font-size: 11px;
      outline: none;
      box-sizing: border-box;
    }

    .acc-col-actions {
      flex: 1;
      min-width: 0;
      display: flex;
      gap: 2px;
      justify-content: flex-end;
      padding-right: 4px;
      overflow: visible;
    }

    /* 操作按钮 - 紧凑设计 */
    .acc-btn {
      padding: 4px 8px;
      border: none;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
      display: flex;
      align-items: center;
      gap: 3px;
      white-space: nowrap;
    }

    .acc-btn-icon {
      padding: 4px;
      background: none;
      border: 1px solid transparent;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.15s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      flex-shrink: 0;
      position: relative;
    }

    .acc-btn-icon:hover {
      background: white;
      color: var(--primary);
      border-color: var(--border);
      box-shadow: var(--shadow-sm);
    }

    .acc-btn-icon:active {
      background: #f1f5f9;
    }

    .acc-btn-icon[data-tooltip="删除"]:hover {
      color: #ef4444;
    }

    /* Tooltip 提示 */
    .acc-btn-icon[data-tooltip]::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      padding: 6px 12px;
      background: rgba(29, 29, 31, 0.95);
      color: white;
      font-size: 12px;
      font-weight: 500;
      white-space: nowrap;
      border-radius: 6px;
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease;
      z-index: 9999;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .acc-btn-icon[data-tooltip]:hover::after {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(-2px);
    }

    .acc-btn-primary {
      background: #007aff;
      color: white;
    }

    .acc-btn-primary:hover {
      background: #0051d5;
    }

    .acc-btn-primary:active {
      background: #004fc4;
    }

    .acc-btn-secondary {
      background: #f5f5f7;
      color: #1d1d1f;
      border: 1px solid #d1d1d6;
    }

    .acc-btn-secondary:hover {
      background: #e8e8ed;
    }

    .acc-btn-secondary:active {
      background: #d1d1d6;
    }

    .acc-btn-danger {
      background: transparent;
      color: #ff3b30;
    }

    .acc-btn-danger:hover {
      background: #fff5f5;
    }

    .acc-btn-danger:active {
      background: #ffe5e5;
    }


    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      align-items: center;
      justify-content: center;
      background: rgba(15, 23, 42, 0.4);
      z-index: 1000;
      backdrop-filter: blur(4px);
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    .modal-overlay.active {
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.2s ease;
    }
    
    /* Windows 兼容性优化 */
    .modal-overlay.closing {
      animation: fadeOut 0.2s ease forwards;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }
    
    .modal-dialog {
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      min-width: 400px;
      max-width: 500px;
      box-shadow: var(--shadow-lg);
      border: 1px solid rgba(255, 255, 255, 0.1);
      animation: slideUpFade 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    }
    
    @keyframes slideUpFade {
      from {
        transform: translateY(20px) scale(0.96);
        opacity: 0;
      }
      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }

    @keyframes slideDown {
      from {
        transform: translateX(-50%) translateY(-20px);
        opacity: 0;
      }
      to {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
      }
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    /* 账号详情样式 */
    .detail-section {
      border: 1px solid #e5e5ea;
      border-radius: 8px;
      padding: 16px;
    }

    .detail-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .detail-item {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .detail-label {
      font-size: 12px;
      color: #86868b;
      font-weight: 500;
    }

    .detail-value {
      font-size: 14px;
      color: #1d1d1f;
      font-weight: 600;
    }

    /* 右键菜单样式 */
    .context-menu-item {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      cursor: pointer;
      transition: background 0.15s;
      font-size: 12px;
      color: #1d1d1f;
    }

    .context-menu-item:hover {
      background: #f5f5f7;
    }

    .context-menu-item:first-child {
      border-radius: 6px 6px 0 0;
    }

    .context-menu-item:last-child {
      border-radius: 0 0 6px 6px;
    }

    .context-menu-divider {
      height: 1px;
      background: #e5e5ea;
      margin: 2px 0;
    }

    /* 现代化弹窗样式 */
    .modern-modal {
      overflow: hidden;
    }

    .modern-modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      border-bottom: 1px solid var(--border);
      background: #fff;
    }

    .modal-title-row {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
      color: #1d1d1f;
      margin: 0;
    }

    .modal-close-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: none;
      background: transparent;
      color: #86868b;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      flex-shrink: 0;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
      -webkit-user-select: none;
    }

    .modal-close-btn:hover {
      background: #f5f5f7;
      color: #1d1d1f;
    }
    
    .modal-close-btn:active {
      transform: scale(0.95);
      background: #e5e5ea;
    }

    .modern-modal-body {
      padding: 24px;
    }

    .modern-form-group {
      margin-bottom: 16px;
    }
    .modern-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-main);
      margin-bottom: 8px;
    }
    .modern-input {
      width: 100%;
      padding: 10px 14px;
      font-size: 14px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--background);
      color: var(--text-main);
      transition: all 0.2s;
      box-sizing: border-box;
    }
    .modern-input:focus {
      outline: none;
      border-color: #007aff;
      box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
    }
    .modern-input::placeholder {
      color: #94a3b8;
    }

    .form-tip {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px;
      background: #f0f8ff;
      border: 1px solid #d1e7ff;
      border-radius: 8px;
      font-size: 12px;
      color: #0066cc;
      margin-top: 16px;
    }

    .modern-modal-footer {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      padding: 16px 24px;
      border-top: 1px solid var(--border);
      background: #f8fafc;
    }

    .btn-secondary {
      background: #ffffff;
      color: var(--text-main);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: #f8fafc;
      border-color: #cbd5e1;
    }

    .modal-header {
      font-size: 17px;
      font-weight: 600;
      color: #1d1d1f;
      margin-bottom: 20px;
    }
    
    .modal-footer {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      margin-top: 20px;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--border);
      border-radius: 4px;
      overflow: hidden;
      margin-top: 12px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), #60a5fa);
      border-radius: 4px;
      width: 0;
      transition: width 0.3s ease;
    }

    .status-message {
      padding: 12px 16px;
      border-radius: 8px;
      margin: 16px 0;
      font-size: 13px;
      line-height: 1.5;
    }

    .status-success {
      background: #dcfce7;
      color: #166534;
      border: 1px solid #bbf7d0;
    }

    .status-error {
      background: #fef2f2;
      color: #dc2626;
      border: 1px solid #fecaca;
    }

    .status-info {
      background: var(--primary-light);
      color: var(--primary);
      border: 1px solid #bfdbfe;
    }

    .domain-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 12px;
    }

    .domain-tag {
      background: #f8fafc;
      color: var(--text-main);
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 8px;
      border: 1px solid var(--border);
    }

    .domain-tag:hover {
      background: #f1f5f9;
    }

    .domain-tag button {
      background: none;
      border: none;
      color: #86868b;
      cursor: pointer;
      font-size: 14px;
      padding: 0;
      line-height: 1;
      transition: color 0.2s ease;
    }

    .domain-tag button:hover {
      color: #1d1d1f;
    }

    h2 {
      font-size: 17px;
      font-weight: 600;
      color: var(--text-main);
      margin-bottom: 16px;
      margin-top: 24px;
    }

    h2:first-child {
      margin-top: 0;
    }

    h3 {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-main);
      margin-bottom: 12px;
      margin-top: 20px;
    }

    hr {
      border: none;
      border-top: 1px solid var(--border);
      margin: 24px 0;
    }

    .action-bar {
      display: flex;
      gap: 24px;
      margin-bottom: 24px;
      flex-wrap: nowrap;
      align-items: center;
      justify-content: space-between;
      background: var(--bg-card);
      padding: 16px 24px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-sm);
    }

    .action-group {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .account-actions-group {
      display: flex;
      gap: 12px;
      align-items: flex-end;
      margin-left: auto;
    }

    .divider {
      width: 1px;
      height: 24px;
      background: #e5e5ea;
      margin: 0 4px;
    }

    /* 批量注册面板 */
    .batch-register-panel {
      background: transparent;
      border: none;
      padding: 0;
    }

    .batch-register-header {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 15px;
      font-weight: 600;
      color: var(--text-main);
      margin-bottom: 0;
      margin-right: 24px;
      padding-bottom: 0;
      border: none;
      padding: 0;
    }

    .batch-register-controls {
      display: flex;
      gap: 16px;
      align-items: flex-end;
      flex-wrap: nowrap;
    }

    .input-field-group {
      display: flex;
      gap: 12px;
      flex: 1;
      min-width: 280px;
    }

    .input-field {
      flex: 1;
      min-width: 120px;
    }

    .input-field label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      font-weight: 500;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .input-field input {
      width: 100%;
      padding: 10px 14px;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      font-size: 14px;
      transition: all 0.2s ease;
      background: #f8fafc;
      color: var(--text-main);
    }

    .input-field input:focus {
      outline: none;
      background: #fff;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
    }

    .input-field input::placeholder {
      color: #94a3b8;
    }

    .batch-register-actions {
      display: flex;
      gap: 8px;
    }

    .btn-register {
      min-width: auto;
      padding: 8px 16px;
      font-weight: 600;
    }

    .btn-cancel {
      min-width: 120px;
      font-weight: 600;
    }

    /* 正在开发页面 */
    .coming-soon-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 500px;
      text-align: center;
      padding: 40px;
    }

    .coming-soon-icon {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: linear-gradient(135deg, #e3f2fd 0%, #f0f8ff 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 32px;
      color: #007aff;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(0, 122, 255, 0.4);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 0 0 20px rgba(0, 122, 255, 0);
      }
    }

    .coming-soon-title {
      font-size: 32px;
      font-weight: 700;
      color: #1d1d1f;
      margin-bottom: 12px;
    }

    .coming-soon-subtitle {
      font-size: 16px;
      color: #86868b;
      margin-bottom: 40px;
    }

    .coming-soon-features {
      display: flex;
      flex-direction: column;
      gap: 16px;
      max-width: 400px;
    }

    .feature-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 20px;
      background: #f5f5f7;
      border-radius: 10px;
      font-size: 14px;
      color: #1d1d1f;
      transition: all 0.2s ease;
    }

    .feature-item:hover {
      background: #ebebf0;
      transform: translateX(4px);
    }

    .feature-item i {
      color: #34c759;
      flex-shrink: 0;
    }

    /* 系统设置页面 */
    .settings-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      max-width: 100%;
    }

    .settings-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 0;
      box-shadow: var(--shadow-sm);
      transition: all 0.2s ease;
      display: flex;
      flex-direction: column;
    }

    .settings-card:hover {
      box-shadow: var(--shadow-md);
    }

    .settings-card.full-width {
      grid-column: 1 / -1;
    }

    .settings-card-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 16px 24px;
      background: linear-gradient(to right, #f8fafc, #fff);
      border-bottom: 1px solid var(--border);
    }

    .settings-card-header i {
      color: var(--primary);
      flex-shrink: 0;
    }

    .settings-card-header h3 {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      color: var(--text-main);
    }

    .settings-card-body {
      padding: 18px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .settings-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .settings-actions {
      grid-column: 1 / -1;
      display: flex;
      justify-content: center;
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid #e5e5ea;
    }

    .btn-large {
      padding: 10px 28px;
      font-size: 14px;
      font-weight: 600;
      min-width: 160px;
    }
    
    .form-group {
      margin-bottom: 12px;
    }
    
    .form-group:last-child {
      margin-bottom: 0;
    }
    
    .form-group label {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      font-weight: 500;
      color: #1d1d1f;
      margin-bottom: 6px;
    }
    
    .form-group label i {
      color: #86868b;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 8px 12px;
      font-size: 13px;
      border: 1px solid #d1d1d6;
      border-radius: 6px;
      background: white;
      transition: all 0.2s ease;
    }
    
    .form-group textarea {
      min-height: 80px;
      resize: vertical;
      font-family: inherit;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #007aff;
      box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
    }
    
    .form-tip {
      display: flex;
      align-items: flex-start;
      gap: 6px;
      font-size: 11px;
      color: #86868b;
      margin-top: 6px;
      line-height: 1.4;
    }
    
    .form-tip i {
      color: #86868b;
      flex-shrink: 0;
      margin-top: 1px;
    }

    /* 批量注册弹窗 */
    .register-modal {
      max-width: 480px;
      width: 90%;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      border-radius: 16px;
      overflow: hidden;
      background: #fff;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }

    .register-modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      border-bottom: 1px solid var(--border);
      background: #fff;
    }

    .register-modal-body {
      padding: 24px;
      flex: 1;
      min-height: 0;
      overflow: visible;
      display: flex;
      flex-direction: column;
      gap: 16px;
      background: #fff;
    }

    .register-stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      padding: 16px;
      background: var(--bg-body);
      border-radius: var(--radius-lg);
    }

    .register-stat-item {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 700;
      color: var(--text-main);
    }

    .stat-value.success {
      color: #16a34a;
    }

    .stat-value.error {
      color: #ef4444;
    }

    .register-log-container {
      flex: 0 0 auto;
      height: 250px;
      background: #0f172a;
      border-radius: var(--radius-md);
      overflow: visible;
      border: 1px solid #334155;
      display: flex;
      flex-direction: column;
    }

    .register-log {
      height: 200px;
      max-height: 200px;
      overflow-y: scroll !important;
      overflow-x: hidden;
      padding: 12px;
      font-family: 'JetBrains Mono', 'Fira Code', 'Monaco', 'Menlo', 'Consolas', monospace;
      font-size: 11px;
      line-height: 1.6;
      color: #e2e8f0;
    }

    .register-log::-webkit-scrollbar {
      width: 8px;
    }

    .register-log::-webkit-scrollbar-track {
      background: #2d2d2d;
    }

    .register-log::-webkit-scrollbar-thumb {
      background: #555;
      border-radius: 4px;
    }

    .register-log::-webkit-scrollbar-thumb:hover {
      background: #666;
    }

    .log-entry {
      margin-bottom: 4px;
      word-wrap: break-word;
    }

    .log-timestamp {
      color: #858585;
      margin-right: 8px;
    }

    .log-info {
      color: #4ec9b0;
    }

    .log-success {
      color: #4ec9b0;
    }

    .log-error {
      color: #f48771;
    }

    .log-warning {
      color: #dcdcaa;
    }

    .register-modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      padding-top: 16px;
      border-top: 1px solid var(--border);
    }

    /* 下拉菜单 */
    .dropdown-container {
      position: relative;
      display: inline-block;
    }

    .dropdown-menu {
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      background: white;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-lg);
      min-width: 160px;
      z-index: 1000;
      display: none;
      overflow: hidden;
      padding: 8px 0;
    }

    .dropdown-menu.show {
      display: block;
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 16px;
      cursor: pointer;
      transition: background 0.2s ease;
      font-size: 13px;
      color: var(--text-main);
    }

    .dropdown-item:hover {
      background: #f8fafc;
    }

    .dropdown-item:active {
      background: #f1f5f9;
    }

    .dropdown-item i {
      color: var(--primary);
    }

    /* 版本更新弹窗响应式样式 */
    @media (max-width: 768px) {
      #versionUpdateModal .modal-dialog {
        max-width: 95% !important;
        margin: 10px !important;
      }
      
      #versionUpdateModal .modal-dialog > div:last-child {
        padding: 20px !important;
      }
      
      #versionUpdateModal .modal-dialog .grid {
        grid-template-columns: 1fr !important;
        gap: 12px !important;
      }
    }

    /* 版本更新弹窗特殊样式 */
    #versionUpdateModal.modal-overlay {
      display: flex;
      align-items: center;
      justify-content: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }

    .app-description {
      font-size: 13px;
      color: #6e6e73;
      line-height: 1.5;
    }

    /* 紧凑型 Dashboard (新) */
    .compact-dashboard {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      box-shadow: var(--shadow-sm);
      margin-bottom: 16px;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
    }

    .compact-account-info {
      display: flex;
      align-items: center;
      gap: 16px;
      flex: 1;
    }

    .compact-avatar {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), #60a5fa);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(37, 99, 235, 0.2);
      flex-shrink: 0;
    }

    .compact-details {
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 0;
    }

    .compact-details h4 {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-main);
      margin: 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .compact-details p {
      font-size: 12px;
      color: var(--text-muted);
      margin: 0;
      display: flex;
      gap: 16px;
      align-items: center;
    }

    .compact-details b {
      font-family: 'SF Mono', Monaco, monospace;
    }

    .compact-stats {
      display: flex;
      align-items: center;
      gap: 24px;
      padding-left: 24px;
      border-left: 1px solid var(--border);
    }

    .compact-stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .compact-stat-value {
      font-size: 18px;
      font-weight: 700;
      line-height: 1.2;
      color: var(--text-main);
    }

    .compact-stat-label {
      font-size: 10px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* 紧凑型 Toolbar (新) */
    .compact-toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
      background: var(--bg-card);
      padding: 8px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
    }

    .compact-toolbar-group {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .toolbar-label {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-main);
      padding-left: 8px;
      padding-right: 4px;
      display: flex;
      align-items: center;
    }

    .toolbar-divider {
      width: 1px;
      height: 20px;
      background: var(--border);
      margin: 0 4px;
    }

    .mini-input {
      width: 70px;
      padding: 6px 10px;
      font-size: 13px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
      background: var(--bg-body);
      color: var(--text-main);
      transition: all 0.2s;
    }
    
    .mini-input:focus {
      background: #fff;
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.1);
    }

    .mini-btn {
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 6px;
      border-radius: var(--radius-md);
      cursor: pointer;
      border: 1px solid transparent;
      transition: all 0.2s;
      height: 32px;
      white-space: nowrap;
    }

    .mini-btn-primary { background: var(--primary); color: white; }
    .mini-btn-primary:hover { background: var(--primary-hover); }
    
    .mini-btn-secondary { background: white; border-color: var(--border); color: var(--text-main); }
    .mini-btn-secondary:hover { background: #f8fafc; border-color: #cbd5e1; }
    
    .mini-btn-success { background: #f0fdf4; border-color: #bbf7d0; color: #166534; }
    .mini-btn-success:hover { background: #dcfce7; }

    /* 保留原有样式的兼容 */
    .stat-compact-item-old {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 0;
      border-left: none;
      position: relative;
    }
    .stat-compact-item:not(:last-child)::after {
      content: '';
      position: absolute;
      right: -10px;
      top: 20%;
      height: 60%;
      width: 1px;
      background: var(--border);
    }

    .stat-compact-label { font-size: 13px; color: var(--text-muted); margin-bottom: 8px; font-weight: 500; }
    .stat-compact-value { font-size: 28px; font-weight: 800; letter-spacing: -1px; line-height: 1.2; }
    
    .stat-total { color: var(--text-main); }
    .stat-active { color: #16a34a; }
    .stat-warning { color: #f59e0b; }
    .stat-expired { color: #ef4444; }

    @media (max-width: 1100px) {
      .dashboard-overview { grid-template-columns: 1fr; }
      .current-account-panel { border-right: none; border-bottom: 1px solid #f0f0f0; }
      .stats-overview-panel { grid-template-columns: repeat(2, 1fr); }
    }

    .switch-accounts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 8px;
      width: 100%;
      max-height: 380px;
      overflow-y: auto;
      padding-right: 4px;
      margin-top: 16px;
    }

    .used-accounts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 8px;
      width: 100%;
      max-height: 380px;
      overflow-y: auto;
      padding-right: 4px;
      margin-top: 16px;
    }

    .switch-account-card {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 12px;
      min-height: 88px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
      position: relative;
      transition: all 0.2s ease;
    }

    .switch-account-card:hover { 
      background: #f1f5f9;
      border-color: #cbd5e1;
      box-shadow: var(--shadow-sm);
    }

    .used-account-card {
      background: #ebebf0;
      border: 1px solid #d2d2d7;
      border-radius: 8px;
      padding: 12px;
      min-height: 88px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
      position: relative;
      opacity: 0.7;
    }

    .used-account-card:hover { 
      background: #e0e0e5;
      opacity: 1;
    }
    .switch-account-card .email,
    .used-account-card .email { 
      font-size: 12px; 
      font-weight: 500; 
      color: #1d1d1f; 
      word-wrap: break-word; 
      word-break: break-all;
      line-height: 1.4;
      padding-right: 48px;
    }
    .switch-account-card .badge,
    .used-account-card .badge { 
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 3px 6px; 
      border-radius: 4px; 
      font-size: 10px; 
      font-weight: 500;
      color: #fff;
      white-space: nowrap;
    }
    .switch-account-card .meta,
    .used-account-card .meta { 
      font-size: 11px; 
      color: #86868b; 
      line-height: 1.3;
      margin-top: 6px;
      word-wrap: break-word;
    }

    /* 教程页面样式 */
    .tutorial-section {
      margin-bottom: 32px;
    }

    .tutorial-card {
      background: #f8fafc;
      border-radius: var(--radius-md);
      padding: 20px;
      border: 1px solid var(--border);
    }

    .tutorial-step {
      display: flex;
      gap: 16px;
      margin-bottom: 24px;
    }

    .tutorial-step:last-child {
      margin-bottom: 0;
    }

    .step-number {
      flex-shrink: 0;
      width: 40px;
      height: 40px;
      background: #007aff;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 600;
    }

    .step-content h4 {
      font-size: 15px;
      font-weight: 600;
      color: #1d1d1f;
      margin-bottom: 8px;
    }

    .step-content p {
      font-size: 13px;
      color: #6e6e73;
      margin-bottom: 8px;
      line-height: 1.5;
    }
    
    .step-content ul {
      margin: 8px 0;
      padding-left: 20px;
    }

    .step-content li {
      font-size: 13px;
      color: #6e6e73;
      margin-bottom: 4px;
      line-height: 1.5;
    }

    .faq-item {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 16px 20px;
      margin-bottom: 12px;
    }

    .faq-question {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-main);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .faq-answer {
      font-size: 13px;
      color: #6e6e73;
      line-height: 1.6;
    }

    .faq-answer p {
      margin-bottom: 8px;
    }

    .faq-answer ul,
    .faq-answer ol {
      margin: 8px 0;
      padding-left: 24px;
    }

    .faq-answer li {
      margin-bottom: 6px;
    }

    .faq-answer code {
      background: #f5f5f7;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 12px;
    }

    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
    }

    .tip-card {
      background: #ffffff;
      border: 1px solid #e5e5ea;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }

    .tip-icon {
      font-size: 32px;
      margin-bottom: 12px;
    }

    .tip-title {
      font-size: 15px;
      font-weight: 600;
      color: #1d1d1f;
      margin-bottom: 8px;
    }

    .tip-content {
      font-size: 13px;
      color: #6e6e73;
      line-height: 1.5;
    }

    .warning-box {
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 8px;
      padding: 16px 20px;
    }

    .warning-box ul {
      margin: 0;
      padding-left: 20px;
    }

    .warning-box li {
      font-size: 13px;
      color: #856404;
      margin-bottom: 8px;
      line-height: 1.5;
    }

    .contact-box {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 20px;
    }

    .contact-box p {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.5;
      margin-bottom: 0;
    }

    /* 滚动条样式 */
    ::-webkit-scrollbar {
      width: 6px;
      height: 6px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: #cbd5e1;
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }

    /* 按钮图标对齐 */
    .btn svg {
      flex-shrink: 0;
    }

    /* 悬浮操作按钮组 */
    .float-actions {
      position: fixed;
      bottom: 24px;
      right: 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      z-index: 100;
    }

    .float-btn {
      width: 50px;
      height: 50px;
      border: 1px solid var(--border);
      background: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      position: relative;
      border-radius: 50%;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .float-btn:hover {
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      transform: translateY(-4px);
    }

    .float-btn:active {
      transform: translateY(0) scale(0.95);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    }

    .refresh-btn {
      color: var(--primary);
    }

    .refresh-btn:hover {
      color: var(--primary-hover);
      background: var(--primary-light);
    }

    .delete-all-btn {
      color: #ef4444;
    }

    .delete-all-btn:hover {
      color: #dc2626;
      background: #fef2f2;
    }

    .save-btn {
      position: fixed;
      right: 24px;
      bottom: 24px;
      background: #10b981;
      color: white;
      border: none;
    }

    .save-btn:hover {
      background: #059669;
      color: white;
    }

    /* 响应式设计 */
    @media (max-width: 1024px) {
      .sidebar {
        width: 200px;
      }
      
      .action-bar {
        flex-direction: column;
        align-items: stretch;
      }
      
      .divider {
        display: none;
      }
    }

    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        left: -240px;
        z-index: 1000;
        transition: left 0.3s ease;
      }
      
      .sidebar.open {
        left: 0;
      }
      
      .content-header {
        padding: 16px 20px;
      }
      
      .content-body {
        padding: 16px 20px;
      }
    }
  </style>
  <script>
    // 初始化全局变量
    const { ipcRenderer } = require('electron');
    // 将 ipcRenderer 设为全局变量，避免重复声明
    window.ipcRenderer = ipcRenderer;
  </script>
  <script>
    // 加载 ConfigManager 并设为全局变量
    const ConfigManager = require('./js/configManager');
    window.ConfigManager = ConfigManager;
    
    // 加载 CONSTANTS 并设为全局变量（供浏览器环境使用）
    const CONSTANTS = require('./js/constants');
    window.CONSTANTS = CONSTANTS;
    
    // 加载 axios 并设为全局变量
    const axios = require('axios');
    window.axios = axios;
  </script>
  <script src="js/filePathManager.js"></script>
  <script src="js/domainManager.js"></script>
  <script src="js/accountQuery.js"></script>
  <script>
    // 验证 AccountQuery 模块是否正确加载
    console.log('=== AccountQuery 模块加载检查 ===');
    console.log('window.AccountQuery 类型:', typeof window.AccountQuery);
    console.log('window.axios 类型:', typeof window.axios);
    console.log('window.CONSTANTS 类型:', typeof window.CONSTANTS);
    
    if (typeof window.AccountQuery === 'undefined') {
      console.error('❌ AccountQuery 模块加载失败');
      console.error('请检查 js/accountQuery.js 文件是否存在语法错误');
    } else {
      console.log('✅ AccountQuery 模块加载成功');
      console.log('AccountQuery 对象:', window.AccountQuery);
      
      // 测试依赖加载
      try {
        if (window.AccountQuery.queryAccount) {
          console.log('✅ queryAccount 方法存在');
        }
      } catch (e) {
        console.error('❌ 测试 AccountQuery 方法失败:', e);
      }
    }
    console.log('=== 检查完成 ===');
  </script>
  <script src="js/accountManager.js"></script>
  <script src="js/accountSwitcher.js"></script>
  <script src="js/currentAccountDetector.js"></script>
  <script src="js/autoBindCard.js"></script>
</head>
<body>
  <div class="app-container">
    <!-- 左侧导航栏 -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="app-logo">
          <div class="app-logo-icon"><img src="https://windsurf.com/favicon.png" alt="Windsurf"></div>
          <div class="app-logo-text">Windsurf Tool</div>
        </div>
        <div class="app-version">批量注册 一键切号 获取绑卡链接</div>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" onclick="switchView('register')">
          <i data-lucide="users" class="nav-item-icon"></i>
          <span>账号管理</span>
        </button>
        <button class="nav-item" onclick="openBatchRegisterModal()">
          <i data-lucide="zap" class="nav-item-icon"></i>
          <span>批量注册</span>
        </button>
        <button class="nav-item" onclick="switchView('autoBindCard')">
          <i data-lucide="credit-card" class="nav-item-icon"></i>
          <span>自动绑卡</span>
        </button>
        <button class="nav-item" onclick="switchView('settings')">
          <i data-lucide="settings" class="nav-item-icon"></i>
          <span>系统设置</span>
        </button>
        <button class="nav-item" onclick="switchView('tutorial')">
          <i data-lucide="book-open" class="nav-item-icon"></i>
          <span>使用教程</span>
        </button>
        <button class="nav-item" onclick="openExternalLink('https://pay.ldxp.cn/shop/windsurftool')" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white;">
          <i data-lucide="shopping-cart" class="nav-item-icon"></i>
          <span>购买Pro账号</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        <div class="footer-links">
          <a href="https://github.com/crispvibe/Windsurf-Tool" class="footer-link" target="_blank">
            <i data-lucide="github" style="width:14px;height:14px;"></i> GitHub
          </a>
          <a href="https://qm.qq.com/q/1W3jvnDoak" class="footer-link" target="_blank">
            <i data-lucide="message-circle" style="width:14px;height:14px;"></i> QQ群: 469028100
          </a>
        </div>
      </div>
    </aside>

    <!-- 右侧主内容区 -->
    <main class="main-content">
      
      <!-- 账号管理视图 (紧凑布局) -->
      <div id="register" class="view-content active">
        
        <!-- 紧凑顶部控制栏 -->
        <div id="topInfoRow" class="compact-header">
          
          <!-- 左侧：当前登录信息 -->
          <div class="header-left">
            <div class="current-login-card">
              <div class="login-status-dot" id="loginStatusDot"></div>
              <div class="login-info">
                <span id="currentAccountEmail" class="login-email">检测中...</span>
                <span id="currentAccountType" class="login-type-tag">--</span>
              </div>
              <div class="login-divider"></div>
              <div class="credits-section">
                <span class="credits-label">已用</span>
                <span id="currentAccountUsedCredits" class="credits-used-num">--</span>
                <span class="credits-slash">/</span>
                <span id="currentAccountCredits" class="credits-total-num">--</span>
              </div>
            </div>
            <!-- 隐藏元素 -->
            <span id="totalCount" style="display:none">0</span>
            <span id="activeCount" style="display:none">0</span>
            <span id="currentAccountExpires" style="display:none">--</span>
            <span id="expiredCount" style="display:none">0</span>
            <span id="creditsProgressBar" style="display:none"></span>
          </div>

          <!-- 右侧：操作区 -->
          <div class="header-right">
            <!-- 搜索按钮 -->
            <button class="compact-btn compact-btn-ghost icon-only-btn" onclick="showSearchAccountModal()" title="搜索账号">
              <i data-lucide="search" style="width: 14px; height: 14px;"></i>
            </button>
            
            <!-- 添加菜单 -->
            <div class="dropdown-container">
              <button class="compact-btn compact-btn-ghost" onclick="toggleAddAccountMenu(event)" id="addAccountBtn">
                <i data-lucide="plus" style="width: 14px; height: 14px;"></i> 添加
              </button>
              <div class="dropdown-menu" id="addAccountMenu">
                <div class="dropdown-item" onclick="showAddAccountForm(); hideAddAccountMenu();">
                  <i data-lucide="edit" style="width: 14px;"></i> 手动添加
                </div>
                <div class="dropdown-item" onclick="showImportAccountForm(); hideAddAccountMenu();">
                  <i data-lucide="upload" style="width: 14px;"></i> 导入账号
                </div>
              </div>
            </div>

            <!-- 导出菜单 -->
            <div class="dropdown-container">
              <button class="compact-btn compact-btn-ghost" onclick="toggleExportMenu(event)" id="exportAccountBtn">
                <i data-lucide="download" style="width: 14px; height: 14px;"></i> 导出
              </button>
              <div class="dropdown-menu" id="exportAccountMenu" style="right: 0; left: auto;">
                <div class="dropdown-item" onclick="exportAccounts('all'); hideExportMenu();">全部导出</div>
                <div class="dropdown-item" onclick="exportAccounts('pro'); hideExportMenu();">仅 Pro 账号</div>
                <div class="dropdown-item" onclick="exportAccounts('free'); hideExportMenu();">仅 Free 账号</div>
                <div class="dropdown-item" onclick="exportAccounts('enterprise'); hideExportMenu();">仅 Enterprise</div>
                <div class="dropdown-item" onclick="exportAccounts('teams'); hideExportMenu();">仅 Teams</div>
                <div class="dropdown-item" onclick="exportAccounts('trial'); hideExportMenu();">仅 Trial</div>
              </div>
            </div>

            <button class="compact-btn compact-btn-ghost" onclick="batchGetAllTokens()" id="batchGetAllTokensBtn">
              <i data-lucide="key" style="width: 14px; height: 14px;"></i> Token
            </button>
            
            <div style="width: 1px; height: 20px; background: var(--border); margin: 0 4px;"></div>

            <button class="compact-btn compact-btn-ghost icon-only-btn" onclick="refreshAllData()" title="刷新所有数据">
              <i data-lucide="refresh-cw" style="width: 16px; height: 16px;"></i>
            </button>
            
            <button class="compact-btn compact-btn-danger icon-only-btn" onclick="deleteAllAccounts()" title="删除所有账号">
              <i data-lucide="trash-2" style="width: 16px; height: 16px;"></i>
            </button>
          </div>
        </div>

        <!-- 进度条区域 -->
        <div id="registerProgress" style="padding: 0; height: 4px; background: #e2e8f0; display: none;">
          <div class="progress-fill" id="progressFill" style="height: 100%; background: var(--primary); width: 0; transition: width 0.3s;"></div>
          <div id="progressText" style="display:none">0%</div>
          <div id="registerStatus" style="display:none"></div>
        </div>

        <!-- 账号列表区域 -->
        <div class="grid-container">
          <div class="accounts-grid" id="accountsList">
            <!-- 列表内容由 JS 生成 -->
          </div>
        </div>
      </div>

      <!-- 自动绑卡视图 -->
      <div id="autoBindCard" class="view-content">
        <div class="settings-wrapper">
          
          <!-- 账号选择 -->
          <div>
            <div class="settings-section-title">
              <i data-lucide="user" style="width: 14px; height: 14px;"></i>
              账号选择
            </div>
            <div class="settings-card-new">
              <div class="setting-row">
                <div class="setting-input-wrapper">
                  <label class="setting-label">选择账号 <span style="color: #94a3b8; font-weight: 400;">(仅显示Free账号)</span></label>
                  <select id="autoBindAccountSelect">
                    <option value="">-- 请选择账号 --</option>
                  </select>
                </div>
                <div class="setting-input-wrapper">
                  <label class="setting-label">填写模式</label>
                  <div style="display: flex; gap: 8px;">
                    <label style="flex: 1; display: flex; align-items: center; justify-content: center; gap: 6px; cursor: pointer; padding: 10px; border-radius: 8px; border: 2px solid #007aff; background: #f0f7ff;" id="manualModeLabel">
                      <input type="radio" name="fillMode" value="manual" checked onchange="AutoBindCard.switchFillMode('manual')" style="display: none;">
                      <i data-lucide="mouse-pointer-click" style="width: 14px; height: 14px; color: #007aff;"></i>
                      <span style="font-size: 13px; color: #007aff; font-weight: 500;">手动填写</span>
                    </label>
                    <label style="flex: 1; display: flex; align-items: center; justify-content: center; gap: 6px; cursor: pointer; padding: 10px; border-radius: 8px; border: 2px solid #e2e8f0; background: transparent;" id="autoModeLabel">
                      <input type="radio" name="fillMode" value="auto" onchange="AutoBindCard.switchFillMode('auto')" style="display: none;">
                      <i data-lucide="bot" style="width: 14px; height: 14px; color: #64748b;"></i>
                      <span style="font-size: 13px; color: #64748b; font-weight: 500;">自动填写</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 虚拟卡配置 -->
          <div>
            <div class="settings-section-title">
              <i data-lucide="credit-card" style="width: 14px; height: 14px;"></i>
              虚拟卡配置
              <div style="margin-left: auto; display: flex; gap: 12px; align-items: center;">
                <label style="display: flex; align-items: center; gap: 4px; font-size: 12px; cursor: pointer; font-weight: 400;">
                  <input type="radio" name="autoBindCardMode" value="bin" checked onchange="AutoBindCard.switchCardModeView('bin')"> 卡号段生成
                </label>
                <label style="display: flex; align-items: center; gap: 4px; font-size: 12px; cursor: pointer; font-weight: 400;">
                  <input type="radio" name="autoBindCardMode" value="full" onchange="AutoBindCard.switchCardModeView('full')"> 完整卡信息
                </label>
              </div>
            </div>
            <div class="settings-card-new">
              <!-- 卡号段模式 -->
              <div id="autoBindBinMode" class="setting-full-row">
                <div class="setting-input-wrapper">
                  <label class="setting-label">卡号段 (x为随机数字)</label>
                  <input type="text" id="autoBindCardBin" placeholder="559888035xxxxxxx" value="559888035xxxxxxx" style="font-family: monospace;" oninput="AutoBindCard.validateCardBin(this)" maxlength="19">
                  <div id="autoBindCardBinStatus" class="setting-helper" style="display: flex; justify-content: space-between; align-items: center;">
                    <span>启动绑卡时将自动生成完整卡号、有效期和CVV</span>
                    <span id="autoBindCardBinLength" style="font-family: monospace; color: #4CAF50;">16/16</span>
                  </div>
                </div>
              </div>
              
              <!-- 完整卡信息模式 -->
              <div id="autoBindFullMode" style="display: none;">
                <div class="setting-full-row" style="margin-bottom: 12px;">
                  <div class="setting-input-wrapper">
                    <label class="setting-label">粘贴卡片信息</label>
                    <div style="display: flex; gap: 8px;">
                      <input type="text" id="autoBindCardPaste" placeholder="格式: 卡号|月份|年份|CVV" style="flex: 1;">
                      <button class="btn btn-secondary" onclick="AutoBindCard.parseCardInfo()">解析</button>
                    </div>
                    <div class="setting-helper">示例: 5598880380486821|06|2030|331</div>
                  </div>
                </div>
                <div class="setting-row">
                  <div class="setting-input-wrapper" style="flex: 2;">
                    <label class="setting-label">卡号</label>
                    <input type="text" id="autoBindCardNumber" placeholder="16位卡号" style="font-family: monospace;">
                  </div>
                  <div class="setting-input-wrapper">
                    <label class="setting-label">月份</label>
                    <input type="text" id="autoBindExpMonth" placeholder="MM" maxlength="2" style="text-align: center;">
                  </div>
                  <div class="setting-input-wrapper">
                    <label class="setting-label">年份</label>
                    <input type="text" id="autoBindExpYear" placeholder="YY" maxlength="4" style="text-align: center;">
                  </div>
                  <div class="setting-input-wrapper">
                    <label class="setting-label">CVV</label>
                    <input type="text" id="autoBindCvv" placeholder="CVV" maxlength="4" style="text-align: center;">
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 账单信息 -->
          <div>
            <div class="settings-section-title">
              <i data-lucide="file-text" style="width: 14px; height: 14px;"></i>
              账单信息
              <div style="margin-left: auto;">
                <button class="btn btn-secondary" style="padding: 4px 12px; font-size: 12px;" onclick="AutoBindCard.randomizeBillingView()">
                  <i data-lucide="shuffle" style="width: 12px; height: 12px;"></i> 随机生成
                </button>
              </div>
            </div>
            <div class="settings-card-new">
              <div class="setting-row">
                <div class="setting-input-wrapper">
                  <label class="setting-label">持卡人姓名</label>
                  <input type="text" id="autoBindName" placeholder="姓名">
                </div>
                <div class="setting-input-wrapper">
                  <label class="setting-label">国家/地区</label>
                  <select id="autoBindCountry" onchange="AutoBindCard.switchCountry(this.value)">
                    <option value="CN">中国</option>
                    <option value="HK">香港</option>
                    <option value="US">美国</option>
                  </select>
                </div>
              </div>
              <div class="setting-row" id="autoBindProvinceRow">
                <div class="setting-input-wrapper">
                  <label class="setting-label">省/州</label>
                  <select id="autoBindProvince">
                    <option value="">-- 选择 --</option>
                  </select>
                </div>
                <div class="setting-input-wrapper">
                  <label class="setting-label">城市</label>
                  <input type="text" id="autoBindCity" placeholder="城市">
                </div>
                <div class="setting-input-wrapper">
                  <label class="setting-label">区/县</label>
                  <input type="text" id="autoBindDistrict" placeholder="区/县">
                </div>
                <div class="setting-input-wrapper">
                  <label class="setting-label">邮编</label>
                  <input type="text" id="autoBindPostalCode" placeholder="邮政编码">
                </div>
              </div>
              <div class="setting-row">
                <div class="setting-input-wrapper" style="flex: 2;">
                  <label class="setting-label">街道地址</label>
                  <input type="text" id="autoBindAddress" placeholder="详细地址">
                </div>
                <div class="setting-input-wrapper">
                  <label class="setting-label">地址第2行 (选填)</label>
                  <input type="text" id="autoBindAddress2" placeholder="公寓/房间号">
                </div>
              </div>
            </div>
          </div>

          <!-- 操作区 -->
          <div>
            <div class="settings-card-new" style="padding: 16px;">
              <div style="display: flex; gap: 12px; align-items: center;">
                <div id="autoBindStatus" style="display: none; flex: 1; padding: 12px 16px; border-radius: 8px; background: #f0f9ff; border: 1px solid #bae6fd; align-items: center; gap: 8px;">
                  <i data-lucide="loader-2" id="autoBindSpinner" style="width: 16px; height: 16px; animation: spin 1s linear infinite; color: #0284c7;"></i>
                  <span id="autoBindStatusText" style="font-size: 13px; color: #0369a1;">准备中...</span>
                </div>
                <button class="btn btn-primary" id="startAutoBindBtn" onclick="AutoBindCard.startFromView()" style="flex: 1;">
                  <i data-lucide="rocket" style="width: 16px; height: 16px;"></i> 开始绑卡
                </button>
              </div>
              <div class="setting-helper" style="margin-top: 12px; text-align: center;">
                提示：每个账号仅限绑卡一次。手动模式将打开浏览器，自动模式尝试自动填写。<br>
                为了防止恶意使用，每天绑卡限制为50次，第二天自动清零，请勿滥用。<br>
                <span style="color: #3b82f6; font-weight: 500;">今日已使用: <span id="autoBindUsageCount">0</span> / 50 次</span>
              </div>
            </div>
          </div>
          
          <div style="height: 60px;"></div>

          <!-- 悬浮保存按钮 -->
          <button class="save-config-btn autoBindSaveBtn" onclick="AutoBindCard.saveViewConfig()" title="保存绑卡配置" style="display: none;">
            <i data-lucide="save" style="width: 16px; height: 16px;"></i>
            保存配置
          </button>
        </div>
      </div>

      <!-- 系统设置视图 -->
      <div id="settings" class="view-content">
        <div class="settings-wrapper">
            
            <!-- 基础设置 -->
            <div>
              <div class="settings-section-title">
                <i data-lucide="sliders" style="width: 14px; height: 14px;"></i>
                基础设置
              </div>
              <div class="settings-card-new">
                <div class="setting-row">
                  <div class="setting-input-wrapper">
                    <label class="setting-label">密码策略</label>
                    <select id="passwordMode">
                      <option value="email">使用账号名作为密码</option>
                      <option value="random">生成高强度随机密码</option>
                    </select>
                    <div class="setting-helper">注册新账号时的密码生成规则</div>
                  </div>
                  
                  <div class="setting-input-wrapper">
                    <label class="setting-label">自动刷新间隔</label>
                    <select id="queryInterval">
                      <option value="5">每 5 分钟</option>
                      <option value="10">每 10 分钟</option>
                      <option value="30">每 30 分钟</option>
                      <option value="60">每 1 小时</option>
                    </select>
                    <div class="setting-helper">后台自动更新账号积分状态的频率</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 域名管理 -->
            <div>
              <div class="settings-section-title">
                <i data-lucide="globe" style="width: 14px; height: 14px;"></i>
                域名管理
              </div>
              <div class="settings-card-new">
                <div class="setting-full-row">
                  <div class="setting-input-wrapper">
                    <label class="setting-label">添加邮箱域名</label>
                    <div style="display: flex; gap: 8px;">
                      <input 
                        type="text" 
                        id="domainInput" 
                        placeholder="输入域名 (例如: gmail.com)" 
                        onkeypress="handleDomainInputKeyPress(event)"
                      >
                      <button class="btn btn-secondary" onclick="addDomain()" style="white-space: nowrap;">添加</button>
                    </div>
                  </div>
                  
                  <div class="tags-container" id="domainTags">
                    <div id="emptyDomainHint" style="width: 100%; text-align: center; color: #94a3b8; font-size: 13px; padding: 10px;">
                      暂无配置的域名
                    </div>
                  </div>
                  <div class="setting-helper" style="text-align: right;">已配置: <span id="domainCount">0</span> 个</div>
                </div>
              </div>
            </div>

            <!-- IMAP 服务配置 -->
            <div>
              <div class="settings-section-title">
                <i data-lucide="mail" style="width: 14px; height: 14px;"></i>
                IMAP 服务配置
              </div>
              <div class="settings-card-new">
                <div class="setting-row">
                  <div class="setting-input-wrapper">
                    <label class="setting-label">QQ 邮箱账号</label>
                    <input type="email" id="imapUser" placeholder="your@qq.com">
                  </div>
                  <div class="setting-input-wrapper">
                    <label class="setting-label">授权码 (非密码)</label>
                    <input type="text" id="imapPassword" placeholder="请输入16位授权码">
                  </div>
                </div>
                <div style="margin-top: 16px; display: flex; justify-content: flex-end;">
                  <button class="btn btn-secondary" onclick="testImap()">
                    <i data-lucide="wifi" style="width: 14px; height: 14px;"></i> 测试连接
                  </button>
                </div>
              </div>
            </div>

            <!-- 系统路径与环境 -->
            <div>
              <div class="settings-section-title">
                <i data-lucide="hard-drive" style="width: 14px; height: 14px;"></i>
                系统路径与环境
              </div>
              <div class="settings-card-new" style="background: #fafafa;">
                <div class="path-display-group">
                  <label class="setting-label" style="font-size: 12px; color: #64748b;">用户数据目录</label>
                  <input type="text" id="userDataPath" readonly class="path-input-readonly" placeholder="加载中...">
                </div>

                <div class="path-display-group">
                  <label class="setting-label" style="font-size: 12px; color: #64748b;">配置文件路径</label>
                  <input type="text" id="configFilePath" readonly class="path-input-readonly" placeholder="加载中...">
                </div>

                <div class="path-display-group">
                  <label class="setting-label" style="font-size: 12px; color: #64748b;">账号存储文件</label>
                  <input type="text" id="accountsFilePath" readonly class="path-input-readonly" placeholder="加载中...">
                </div>

                <div class="path-display-group" style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 16px; display: flex; justify-content: space-between; align-items: center;">
                  <span style="font-size: 13px; color: #64748b;">当前运行平台</span>
                  <div id="platformInfo" class="platform-badge">加载中...</div>
                </div>
              </div>
            </div>

            <div id="settingsStatus"></div>
            <div style="height: 60px;"></div>
          </div>

          <!-- 悬浮保存按钮 -->
          <button class="save-config-btn" onclick="saveSettings()" title="保存所有配置" style="display: none;">
            <i data-lucide="save" style="width: 16px; height: 16px;"></i>
            保存配置
          </button>
        </div>

      <!-- 使用教程视图 -->
      <div id="tutorial" class="view-content">
        <article class="tutorial-article">
            <h1>使用教程</h1>
            
            <section>
              <h2>快速开始</h2>
              <p><strong>批量注册：</strong>点击"注册"按钮，设置数量，系统会自动完成注册流程。</p>
              <p><strong>获取 Token：</strong>点击"Token"按钮，系统会自动登录并获取 Token。</p>
              <p><strong>切换账号：</strong>点击账号邮箱，系统会自动切换到 Windsurf。</p>
            </section>

            <section>
              <h2>QQ 邮箱配置</h2>
              <p>在系统设置中填写以下信息：</p>
              <ul>
                <li>IMAP 服务器：<code>imap.qq.com</code></li>
                <li>端口：<code>993</code></li>
                <li>邮箱：<code>your@qq.com</code></li>
                <li>密码：<code>授权码</code>（非QQ密码）</li>
              </ul>
              <p>授权码获取：QQ邮箱 → 设置 → 账户 → 开启IMAP → 生成授权码</p>
            </section>

            <section>
              <h2>Cloudflare 邮箱转发</h2>
              <ol>
                <li>登录 <a href="https://dash.cloudflare.com" target="_blank">Cloudflare</a>，添加域名</li>
                <li>进入 电子邮件 → 电子邮件路由 → 启用</li>
                <li>设置 全部捕获 → 转发到 QQ 邮箱</li>
              </ol>
            </section>

            <section>
              <h2>购买域名</h2>
              <p>推荐：<a href="https://wanwang.aliyun.com/domain" target="_blank">阿里云（万网）</a></p>
              <p>选择 .xyz、.top、.site 等后缀，首年只需 1-5 元。</p>
            </section>

            <section>
              <h2>自动绑卡</h2>
              <p>自动绑卡功能支持虚拟卡绑定 Windsurf Pro 账号，获取无限积分。</p>
              <h3>操作步骤</h3>
              <ol>
                <li>进入「自动绑卡」页面</li>
                <li>选择需要绑卡的 <strong>Free 账号</strong></li>
                <li>选择填写模式：<strong>手动填写</strong> 或 <strong>自动填写</strong></li>
                <li>配置虚拟卡信息：
                  <ul>
                    <li><strong>卡号段生成</strong>：填写卡号段（x 为随机数字），系统自动生成完整卡号</li>
                    <li><strong>完整卡信息</strong>：直接填写卡号、有效期、CVV</li>
                  </ul>
                </li>
                <li>填写账单信息（可点击"随机生成"）</li>
                <li>点击「开始绑卡」按钮</li>
                <li><strong>自动填写模式</strong>：表单填写完成后，需要手动点击「订阅」按钮完成绑卡</li>
              </ol>
              <h3>填写模式说明</h3>
              <ul>
                <li><strong>手动填写</strong>：打开浏览器后需要手动点击填写按钮</li>
                <li><strong>自动填写</strong>：打开浏览器后自动填写表单，<strong>但仍需手动点击订阅按钮</strong></li>
              </ul>
              <h3>重要提醒</h3>
              <p style="color: #ef4444; font-weight: 500;">⚠️ 大部分公开的卡号段（BIN）已被风控，绑卡时可能会被拒绝。卡号段本身几乎是 0 成本的信息，请不要花钱购买所谓的"可用卡头"，谨防被骗！</p>
            </section>

            <section>
              <h2>常见问题</h2>
              <p><strong>浏览器无法启动？</strong> 确保已安装 Chrome 90+ 浏览器。</p>
              <p><strong>Token 会过期吗？</strong> 不会，切号功能会自动刷新 Token。</p>
              <p><strong>到期时间不准确？</strong> 点击"刷新积分"获取真实时间。</p>
              <p><strong>绑卡失败？</strong> 检查卡号是否正确，或尝试更换卡号段。</p>
            </section>
          </article>
        </div>

    </main>
  </div>

  <!-- 批量注册弹窗 -->
  <div id="batchRegisterModal" class="modal-overlay" style="display:none;">
    <div class="modal-dialog register-modal" onclick="event.stopPropagation()">
      <div class="register-modal-header">
        <div class="modal-title-row">
          <i data-lucide="zap" style="width: 24px; height: 24px; color: #007aff;"></i>
          <h3 class="modal-title">批量注册</h3>
        </div>
        <button class="modal-close-btn" onclick="closeBatchRegisterModal()" title="关闭">
          <i data-lucide="x" style="width: 20px; height: 20px;"></i>
        </button>
      </div>
      
      <div class="register-modal-body">
        <!-- 配置区域 -->
        <div id="registerConfigSection" style="margin-bottom: 16px;">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
            <div>
              <label style="display: block; font-size: 13px; font-weight: 500; color: #1d1d1f; margin-bottom: 6px;">注册数量</label>
              <input type="number" id="registerCount" value="1" min="1" max="50" style="width: 100%; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
            </div>
            <div>
              <label style="display: block; font-size: 13px; font-weight: 500; color: #1d1d1f; margin-bottom: 6px;">并发线程</label>
              <input type="number" id="registerThreads" value="1" min="1" max="10" style="width: 100%; padding: 10px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 14px;">
            </div>
          </div>
          <button class="btn btn-primary" onclick="startBatchRegister()" style="width: 100%; padding: 12px; font-size: 14px; justify-content: center;">
            <i data-lucide="play" style="width: 16px; height: 16px;"></i>
            开始注册
          </button>
        </div>
        
        <!-- 注册统计信息 -->
        <div class="register-stats" id="registerStatsSection" style="display: none;">
          <div class="register-stat-item">
            <span class="stat-label">总数量:</span>
            <span class="stat-value" id="modalTotalCount">0</span>
          </div>
          <div class="register-stat-item">
            <span class="stat-label">成功:</span>
            <span class="stat-value success" id="modalSuccessCount">0</span>
          </div>
          <div class="register-stat-item">
            <span class="stat-label">失败:</span>
            <span class="stat-value error" id="modalFailCount">0</span>
          </div>
          <div class="register-stat-item">
            <span class="stat-label">进度:</span>
            <span class="stat-value" id="modalProgress">0%</span>
          </div>
        </div>
        
        <!-- 日志显示区域 -->
        <div class="register-log-container" id="registerLogSection" style="display: none;">
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; background: #2d2d2d; border-bottom: 1px solid #444;">
            <span style="color: #d4d4d4; font-size: 12px; font-weight: 600; letter-spacing: 0.5px;">实时日志</span>
            <button 
              onclick="copyRegisterLog()" 
              style="background: #007aff; border: none; color: white; padding: 6px 14px; border-radius: 5px; cursor: pointer; font-size: 11px; font-weight: 500; display: inline-flex; align-items: center; gap: 5px; transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0, 122, 255, 0.3);"
              onmouseover="this.style.background='#0051d5'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 3px 6px rgba(0, 122, 255, 0.4)'"
              onmouseout="this.style.background='#007aff'; this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0, 122, 255, 0.3)'"
              title="复制全部日志到剪贴板">
              <i data-lucide="copy" style="width: 13px; height: 13px;"></i>
              复制日志
            </button>
          </div>
          <div class="register-log" id="registerLog"></div>
        </div>
        
        <!-- 底部按钮 -->
        <div class="register-modal-footer" id="registerFooterSection" style="display: none;">
          <button class="btn btn-danger" id="modalCancelBtn" onclick="cancelBatchRegister()">
            <i data-lucide="x-circle" style="width: 16px; height: 16px;"></i>
            取消注册
          </button>
          <button class="btn btn-secondary" onclick="closeBatchRegisterModal()">
            <i data-lucide="x" style="width: 16px; height: 16px;"></i>
            关闭
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 登录获取 Token 弹窗 -->
  <div id="loginTokenModal" class="modal-overlay" style="display:none;">
    <div class="modal-dialog modern-modal" style="max-width: 360px;" onclick="event.stopPropagation()">
      <div class="modern-modal-header" style="padding: 14px 16px;">
        <div class="modal-title-row">
          <i data-lucide="key" style="width: 16px; height: 16px; color: #007aff;"></i>
          <h3 style="margin: 0; font-size: 14px; font-weight: 600;">获取 Token</h3>
        </div>
        <button class="modal-close-btn" onclick="closeLoginTokenModal()" style="width: 24px; height: 24px;">
          <i data-lucide="x" style="width: 14px; height: 14px;"></i>
        </button>
      </div>
      
      <div class="modern-modal-body" style="padding: 16px;">
        <!-- 账号信息 -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; font-size: 12px;">
          <span id="loginTokenEmail" style="color: var(--text-main); font-weight: 500; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">-</span>
          <span id="loginTokenStatus" style="color: #007aff; font-weight: 600;">等待中</span>
        </div>
        
        <!-- 日志显示区域 -->
        <div id="loginTokenLog" style="max-height: 150px; overflow-y: auto; background: #18181b; border-radius: 6px; padding: 8px 10px; font-family: 'SF Mono', Monaco, monospace; font-size: 10px; color: #a1a1aa; line-height: 1.5;"></div>
      </div>
      
      <div class="modern-modal-footer" style="padding: 12px 16px;">
        <button class="btn btn-secondary" onclick="closeLoginTokenModal()" style="font-size: 12px; padding: 6px 16px;">
          关闭
        </button>
      </div>
    </div>
  </div>

  <!-- 手动添加账号弹窗 -->
  <div id="addAccountModal" class="modal-overlay" onclick="hideAddAccountForm()">
    <div class="modal-dialog modern-modal" onclick="event.stopPropagation()">
      <div class="modern-modal-header">
        <div class="modal-title-row">
          <i data-lucide="user-plus" style="width: 24px; height: 24px; color: #007aff;"></i>
          <h3 class="modal-title">添加账号</h3>
        </div>
        <button class="modal-close-btn" onclick="hideAddAccountForm()" title="关闭">
          <i data-lucide="x" style="width: 20px; height: 20px;"></i>
        </button>
      </div>
      
      <div class="modern-modal-body">
        <div class="form-group">
          <label>邮箱地址</label>
          <input type="email" id="manualEmail" placeholder="请输入邮箱地址" autocomplete="off">
        </div>
        
        <div class="form-group">
          <label>密码</label>
          <input type="text" id="manualPassword" placeholder="请输入密码" autocomplete="off">
        </div>
      </div>
      
      <div class="modern-modal-footer">
        <button class="btn btn-secondary" onclick="hideAddAccountForm()">
          取消
        </button>
        <button class="btn btn-primary" onclick="addManualAccount()">
          <i data-lucide="check" style="width: 16px; height: 16px;"></i>
          添加账号
        </button>
      </div>
    </div>
  </div>

  <!-- 搜索账号弹窗 -->
  <div id="searchAccountModal" class="modal-overlay" onclick="hideSearchAccountModal()">
    <div class="modal-dialog modern-modal" style="max-width: 500px;" onclick="event.stopPropagation()">
      <div class="modern-modal-header">
        <div class="modal-title-row">
          <i data-lucide="search" style="width: 24px; height: 24px; color: #007aff;"></i>
          <h3 class="modal-title">搜索账号</h3>
        </div>
        <button class="modal-close-btn" onclick="hideSearchAccountModal()" title="关闭">
          <i data-lucide="x" style="width: 20px; height: 20px;"></i>
        </button>
      </div>
      
      <div class="modern-modal-body">
        <div class="modern-form-group">
          <label class="modern-label">搜索关键词</label>
          <input type="text" id="searchAccountInput" class="modern-input" placeholder="输入邮箱或账号类型（如 Pro、Free）" oninput="performAccountSearch()" autofocus>
          <div class="form-tip" style="margin-top: 8px;">
            <i data-lucide="info" style="width: 14px; height: 14px;"></i>
            <span>支持搜索邮箱、账号类型（Pro/Free/Enterprise/Teams/Trial）</span>
          </div>
        </div>
        
        <!-- 搜索结果 -->
        <div id="searchResultsContainer" style="margin-top: 16px; max-height: 300px; overflow-y: auto;">
          <div id="searchResults" style="display: flex; flex-direction: column; gap: 8px;">
            <!-- 搜索结果会动态填充 -->
          </div>
        </div>
      </div>
      
      <div class="modern-modal-footer">
        <button class="btn btn-secondary" onclick="hideSearchAccountModal()">
          <i data-lucide="x" style="width: 16px; height: 16px;"></i>
          关闭
        </button>
        <button class="btn btn-primary" onclick="clearSearchAndShowAll()">
          <i data-lucide="list" style="width: 16px; height: 16px;"></i>
          显示全部
        </button>
      </div>
    </div>
  </div>

  <!-- 自定义确认弹窗 -->
  <div id="customConfirmModal" class="modal-overlay" style="z-index: 10001;">
    <div class="modal-dialog modern-modal" style="max-width: 400px;" onclick="event.stopPropagation()">
      <div class="modern-modal-header">
        <div class="modal-title-row">
          <div id="confirmIconContainer" style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #ff3b30 0%, #ff6b6b 100%); display: flex; align-items: center; justify-content: center;">
            <i data-lucide="alert-triangle" style="width: 20px; height: 20px; color: white;"></i>
          </div>
          <h3 class="modal-title" id="confirmTitle">确认删除</h3>
        </div>
      </div>
      
      <div class="modern-modal-body" style="text-align: center; padding: 20px 24px;">
        <p id="confirmMessage" style="margin: 0; font-size: 14px; color: var(--text-main); line-height: 1.6;">
          确定要执行此操作吗？
        </p>
        <p id="confirmSubMessage" style="margin: 12px 0 0; font-size: 12px; color: #ff3b30; font-weight: 500;">
          此操作无法撤销！
        </p>
      </div>
      
      <div class="modern-modal-footer" style="justify-content: center; gap: 12px;">
        <button class="btn btn-secondary" onclick="handleConfirmCancel()" style="min-width: 100px;">
          <i data-lucide="x" style="width: 16px; height: 16px;"></i>
          取消
        </button>
        <button class="btn" id="confirmActionBtn" onclick="handleConfirmAction()" style="min-width: 100px; background: linear-gradient(135deg, #ff3b30 0%, #ff6b6b 100%); color: white; border: none;">
          <i data-lucide="trash-2" style="width: 16px; height: 16px;"></i>
          <span id="confirmActionText">删除</span>
        </button>
      </div>
    </div>
  </div>

  <!-- 版本更新弹窗 -->
  <div id="versionUpdateModal" class="modal-overlay" style="display: none; z-index: 10000;">
    <div class="modal-dialog modern-modal" style="max-width: 500px; width: 90%;" onclick="event.stopPropagation()">
      <div class="modern-modal-header">
        <div class="modal-title-row">
          <i data-lucide="alert-circle" style="width: 24px; height: 24px; color: #ff3b30;"></i>
          <h3 class="modal-title" id="versionUpdateTitle">发现新版本</h3>
        </div>
      </div>
      
      <div class="modern-modal-body">
        <!-- 更新消息 -->
        <div class="form-tip" style="background: #fff3cd; border: 1px solid #ffc107; margin-bottom: 16px;">
          <i data-lucide="info" style="width: 16px; height: 16px; color: #856404;"></i>
          <div style="flex: 1;">
            <p style="margin: 0; font-size: 13px; color: #856404; line-height: 1.6;" id="versionUpdateContent">
              当前版本已不再支持，请下载最新版本以继续使用。
            </p>
          </div>
        </div>
        
        <!-- 版本信息 -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;">
          <div style="background: #f5f5f7; padding: 16px; border-radius: 8px; text-align: center;">
            <div style="font-size: 11px; color: #86868b; margin-bottom: 6px; font-weight: 500; text-transform: uppercase;">当前版本</div>
            <div style="font-size: 18px; font-weight: 700; color: #1d1d1f;" id="currentVersionDisplay">-</div>
          </div>
          <div style="background: #e3f2fd; padding: 16px; border-radius: 8px; text-align: center; border: 1px solid #007aff;">
            <div style="font-size: 11px; color: #007aff; margin-bottom: 6px; font-weight: 600; text-transform: uppercase;">最新版本</div>
            <div style="font-size: 18px; font-weight: 700; color: #007aff;" id="latestVersionDisplay">-</div>
          </div>
        </div>
        
        <!-- 提示 -->
        <div class="form-tip" style="margin-bottom: 0;">
          <i data-lucide="lightbulb" style="width: 14px; height: 14px;"></i>
          <span style="font-size: 12px;" id="versionNotice">为了确保最佳体验和安全性，建议及时更新</span>
        </div>
      </div>
      
      <div class="modern-modal-footer">
        <button class="btn btn-secondary" id="versionCloseBtn" style="display: none;">
          稍后更新
        </button>
        <button class="btn btn-primary" id="versionDownloadBtn" onclick="openDownloadUrl()">
          <i data-lucide="download" style="width: 16px; height: 16px;"></i>
          立即下载
        </button>
      </div>
    </div>
  </div>

  <!-- 批量获取Token进度弹窗 -->
  <div id="batchTokenProgressModal" class="modal-overlay" style="display: none;">
    <div class="modal-dialog modern-modal" style="max-width: 360px;" onclick="event.stopPropagation()">
      <div class="modern-modal-header" style="padding: 14px 16px;">
        <div class="modal-title-row">
          <i data-lucide="key" style="width: 16px; height: 16px; color: #007aff;"></i>
          <h3 style="margin: 0; font-size: 14px; font-weight: 600;">获取 Token</h3>
        </div>
        <button class="modal-close-btn" onclick="closeBatchTokenProgressModal()" style="width: 24px; height: 24px;">
          <i data-lucide="x" style="width: 14px; height: 14px;"></i>
        </button>
      </div>
      
      <div class="modern-modal-body" style="padding: 16px;">
        <!-- 进度条 -->
        <div style="margin-bottom: 12px;">
          <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 6px;">
            <span id="batchTokenCurrentEmail" style="color: var(--text-main); font-weight: 500; max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">等待开始...</span>
            <span id="batchTokenProgressText" style="color: #007aff; font-weight: 600;">0/0</span>
          </div>
          <div style="height: 4px; background: #e5e5ea; border-radius: 2px; overflow: hidden;">
            <div id="batchTokenProgressFill" style="height: 100%; background: #007aff; transition: width 0.3s; width: 0%;"></div>
          </div>
        </div>

        <!-- 统计 -->
        <div style="display: flex; gap: 8px; margin-bottom: 12px;">
          <div style="flex: 1; padding: 8px; background: #f0fdf4; border-radius: 6px; text-align: center;">
            <span style="font-size: 16px; font-weight: 700; color: #22c55e;" id="batchTokenSuccessCount">0</span>
            <span style="font-size: 10px; color: #86868b; margin-left: 2px;">成功</span>
          </div>
          <div style="flex: 1; padding: 8px; background: #fef2f2; border-radius: 6px; text-align: center;">
            <span style="font-size: 16px; font-weight: 700; color: #ef4444;" id="batchTokenFailCount">0</span>
            <span style="font-size: 10px; color: #86868b; margin-left: 2px;">失败</span>
          </div>
          <div style="flex: 1; padding: 8px; background: #eff6ff; border-radius: 6px; text-align: center;">
            <span style="font-size: 16px; font-weight: 700; color: #3b82f6;" id="batchTokenTotalCount">0</span>
            <span style="font-size: 10px; color: #86868b; margin-left: 2px;">总计</span>
          </div>
        </div>

        <!-- 日志 -->
        <div id="batchTokenLogContainer" style="max-height: 120px; overflow-y: auto; background: #18181b; border-radius: 6px; padding: 8px 10px; font-family: 'SF Mono', Monaco, monospace; font-size: 10px; color: #a1a1aa; line-height: 1.5;">
          <div>正在启动...</div>
        </div>
        
        <!-- 隐藏的状态元素 -->
        <span id="batchTokenCurrentStatus" style="display: none;"></span>
      </div>
      
      <div class="modern-modal-footer" style="padding: 12px 16px;">
        <button class="btn btn-secondary" id="batchTokenCloseBtn" onclick="closeBatchTokenProgressModal()" style="font-size: 12px; padding: 6px 16px;">
          取消
        </button>
      </div>
    </div>
  </div>

  <script>
    // 打开 QQ 群函数
    function openQQGroup() {
      // 使用全局的 shell（在 renderer.js 中已声明）
      if (typeof shell === 'undefined') {
        const { shell: electronShell } = require('electron');
        electronShell.openExternal('https://qm.qq.com/q/1W3jvnDoak');
      } else {
        shell.openExternal('https://qm.qq.com/q/1W3jvnDoak');
      }
      
      // 显示提示
      if (typeof showToast !== 'undefined') {
        showToast('正在打开 QQ 群...', 'info');
      }
    }

    
    // 视图切换函数
    function switchView(viewName) {
      // 更新导航项激活状态
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      
      // 安全地添加激活状态
      if (event && event.target) {
        const navItem = event.target.closest('.nav-item');
        if (navItem) {
          navItem.classList.add('active');
        }
      }
      
      // 更新视图内容
      document.querySelectorAll('.view-content').forEach(view => {
        view.classList.remove('active');
      });
      
      const targetView = document.getElementById(viewName);
      if (targetView) {
        targetView.classList.add('active');
      }
      
      // 调用原有的switchTab逻辑来处理页面特定的初始化
      if (typeof window.switchTabLogic === 'function') {
        window.switchTabLogic(viewName);
      }

      // 悬浮保存按钮控制
      const settingsSaveBtn = document.querySelector('#settings .save-config-btn');
      const autoBindSaveBtn = document.querySelector('.autoBindSaveBtn');
      
      // 隐藏所有悬浮按钮
      if (settingsSaveBtn) settingsSaveBtn.style.display = 'none';
      if (autoBindSaveBtn) autoBindSaveBtn.style.display = 'none';
      
      // 如果切换到设置页面
      if (viewName === 'settings') {
        loadConfigPath();
        if (settingsSaveBtn) settingsSaveBtn.style.display = 'flex';
        // 重新初始化域名管理器
        if (typeof initDomainManager === 'function') {
          initDomainManager();
        }
      }
      
      // 如果切换到自动绑卡页面，初始化
      if (viewName === 'autoBindCard') {
        if (autoBindSaveBtn) autoBindSaveBtn.style.display = 'flex';
        if (typeof AutoBindCard !== 'undefined' && AutoBindCard.onViewSwitch) {
          AutoBindCard.onViewSwitch();
        }
        // 初始化图标
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }
    }
    
    // 兼容旧的switchTab函数（保持原有功能）
    function switchTab(tabName) {
      // 如果是新UI，使用switchView
      if (document.querySelector('.app-container')) {
        switchView(tabName);
      } else {
        // 旧UI逻辑（如果需要）
        document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
        
        const activeTab = Array.from(document.querySelectorAll('.tab')).find(tab => 
          tab.getAttribute('onclick')?.includes(tabName)
        );
        if (activeTab) activeTab.classList.add('active');
        
        const activeContent = document.getElementById(tabName);
        if (activeContent) activeContent.classList.add('active');
      }
    }
    
    // 配置文件路径相关函数
    async function loadConfigPath() {
      try {
        const result = await ipcRenderer.invoke('get-config-path');
        const configPathInput = document.getElementById('configPath');
        if (configPathInput && result.path) {
          configPathInput.value = result.path;
        }
      } catch (error) {
        console.error('获取配置文件路径失败:', error);
      }
    }
    
    async function copyConfigPath() {
      const configPathInput = document.getElementById('configPath');
      if (!configPathInput || !configPathInput.value) {
        showCustomAlert('配置文件路径未加载', 'warning');
        return;
      }
      
      try {
        await navigator.clipboard.writeText(configPathInput.value);
        showCustomAlert('路径已复制到剪贴板', 'success');
      } catch (error) {
        // 降级方案：使用传统方法
        configPathInput.select();
        document.execCommand('copy');
        showCustomAlert('路径已复制到剪贴板', 'success');
      }
    }
    
    async function openConfigFolder() {
      try {
        const result = await ipcRenderer.invoke('open-config-folder');
        if (!result.success) {
          showCustomAlert('打开文件夹失败: ' + (result.error || '未知错误'), 'error');
        }
      } catch (error) {
        console.error('打开配置文件夹失败:', error);
        showCustomAlert('打开文件夹失败: ' + error.message, 'error');
      }
    }
    
    // 打开外部链接
    function openExternalLink(url) {
      if (typeof shell !== 'undefined') {
        shell.openExternal(url);
      } else if (window.ipcRenderer) {
        window.ipcRenderer.invoke('open-external-url', url);
      }
    }
    
    // 批量注册弹窗控制
    let batchRegisterEscHandler = null;
    
    function openBatchRegisterModal() {
      const modal = document.getElementById('batchRegisterModal');
      const logEl = document.getElementById('registerLog');
      
      // 清空日志
      if (logEl) {
        logEl.innerHTML = '';
      }
      
      // 重置统计
      document.getElementById('modalTotalCount').textContent = '0';
      document.getElementById('modalSuccessCount').textContent = '0';
      document.getElementById('modalFailCount').textContent = '0';
      document.getElementById('modalProgress').textContent = '0%';
      
      // 显示配置区域，隐藏进度区域
      document.getElementById('registerConfigSection').style.display = 'block';
      document.getElementById('registerStatsSection').style.display = 'none';
      document.getElementById('registerLogSection').style.display = 'none';
      document.getElementById('registerFooterSection').style.display = 'none';
      
      // 显示弹窗
      modal.style.display = 'flex';
      
      // 添加 ESC 键关闭监听
      batchRegisterEscHandler = function(e) {
        if (e.key === 'Escape') {
          closeBatchRegisterModal();
        }
      };
      document.addEventListener('keydown', batchRegisterEscHandler);
      
      // 初始化图标
      if (typeof lucide !== 'undefined') {
        lucide.createIcons();
      }
    }
    
    // 开始注册时切换到进度视图
    function showRegisterProgress() {
      document.getElementById('registerConfigSection').style.display = 'none';
      document.getElementById('registerStatsSection').style.display = 'grid';
      document.getElementById('registerLogSection').style.display = 'block';
      document.getElementById('registerFooterSection').style.display = 'flex';
    }
    
    function closeBatchRegisterModal() {
      const modal = document.getElementById('batchRegisterModal');
      modal.style.display = 'none';
      
      // 移除 ESC 键监听
      if (batchRegisterEscHandler) {
        document.removeEventListener('keydown', batchRegisterEscHandler);
        batchRegisterEscHandler = null;
      }
    }
    
    // 登录获取 Token 弹窗控制
    function closeLoginTokenModal() {
      const modal = document.getElementById('loginTokenModal');
      if (modal) modal.style.display = 'none';
      
      // 移除日志监听器
      if (window.ipcRenderer) {
        window.ipcRenderer.removeAllListeners('login-log');
      }
    }
    
    // 复制登录 Token 日志
    function copyLoginTokenLog() {
      const logEl = document.getElementById('loginTokenLog');
      if (!logEl) return;
      
      // 获取所有日志条目
      const logEntries = logEl.querySelectorAll('.log-entry');
      if (logEntries.length === 0) {
        showCenterMessage('暂无日志可复制', 'warning', 2000);
        return;
      }
      
      // 提取纯文本
      const logText = Array.from(logEntries)
        .map(entry => entry.textContent)
        .join('\n');
      
      // 复制到剪贴板
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(logText)
          .then(() => {
            showCenterMessage('日志已复制到剪贴板', 'success', 2000);
          })
          .catch(err => {
            console.error('复制失败:', err);
            showCenterMessage('复制失败，请手动复制', 'error', 2000);
          });
      } else {
        showCenterMessage('浏览器不支持自动复制', 'error', 2000);
      }
    }
    
    // 添加日志到弹窗
    function addRegisterLog(message, type = 'info') {
      const logEl = document.getElementById('registerLog');
      if (!logEl) {
        console.warn('[addRegisterLog] registerLog 元素不存在');
        return;
      }
      
      const timestamp = new Date().toLocaleTimeString('zh-CN', { hour12: false });
      const logEntry = document.createElement('div');
      logEntry.className = 'log-entry';
      
      let colorClass = 'log-info';
      if (type === 'success') colorClass = 'log-success';
      else if (type === 'error') colorClass = 'log-error';
      else if (type === 'warning') colorClass = 'log-warning';
      
      logEntry.innerHTML = `<span class="log-timestamp">[${timestamp}]</span><span class="${colorClass}">${message}</span>`;
      logEntry.setAttribute('data-log-text', `[${timestamp}] ${message}`);
      logEl.appendChild(logEntry);
      
      // 立即滚动到底部
      logEl.scrollTop = logEl.scrollHeight + 1000;
    }
    
    // 复制注册日志
    function copyRegisterLog() {
      const logEl = document.getElementById('registerLog');
      if (!logEl) return;
      
      // 获取所有日志条目
      const logEntries = logEl.querySelectorAll('.log-entry');
      if (logEntries.length === 0) {
        showCenterMessage('暂无日志可复制', 'warning', 2000);
        return;
      }
      
      // 提取纯文本
      const logText = Array.from(logEntries)
        .map(entry => entry.getAttribute('data-log-text') || entry.textContent)
        .join('\n');
      
      // 复制到剪贴板
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(logText)
          .then(() => {
            showCenterMessage('日志已复制到剪贴板', 'success', 2000);
          })
          .catch(err => {
            console.error('复制失败:', err);
            fallbackCopyLog(logText);
          });
      } else {
        fallbackCopyLog(logText);
      }
    }
    
    // 备用复制方法
    function fallbackCopyLog(text) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed';
      textarea.style.opacity = '0';
      document.body.appendChild(textarea);
      textarea.select();
      
      try {
        document.execCommand('copy');
        showCenterMessage('日志已复制到剪贴板', 'success', 2000);
      } catch (err) {
        console.error('备用复制方法失败:', err);
        showCenterMessage('复制失败，请手动复制', 'error', 2000);
      } finally {
        document.body.removeChild(textarea);
      }
    }
    
    // 更新注册统计
    function updateRegisterStats(total, success, fail, progress) {
      document.getElementById('modalTotalCount').textContent = total;
      document.getElementById('modalSuccessCount').textContent = success;
      document.getElementById('modalFailCount').textContent = fail;
      document.getElementById('modalProgress').textContent = progress + '%';
    }
    
    // 密码显示/隐藏切换
    function togglePassword(event) {
      event.stopPropagation();
      const btn = event.currentTarget;
      const cell = btn.closest('.password-cell');
      const masked = cell.querySelector('.password-masked');
      const text = cell.querySelector('.password-text');
      const icon = btn.querySelector('i');
      
      if (!cell || !masked || !text) {
        console.error('密码元素未找到');
        return;
      }
      
      if (masked.style.display === 'none') {
        // 隐藏密码
        masked.style.display = 'inline';
        text.style.display = 'none';
        if (icon) {
          icon.setAttribute('data-lucide', 'eye');
        }
      } else {
        // 显示密码
        masked.style.display = 'none';
        text.style.display = 'inline';
        if (icon) {
          icon.setAttribute('data-lucide', 'eye-off');
        }
      }
      
      // 重新初始化图标
      if (typeof lucide !== 'undefined') {
        lucide.createIcons();
      }
    }
    
    // 复制邮箱文本
    function copyEmailText(event) {
      event.stopPropagation();
      const emailText = event.target.textContent;
      
      if (!emailText) return;
      
      // 复制到剪贴板
      navigator.clipboard.writeText(emailText).then(() => {
        // 显示复制成功提示
        const originalText = event.target.textContent;
        const originalColor = event.target.style.color;
        event.target.textContent = '✓ 已复制';
        event.target.style.color = '#34c759';
        
        // 1秒后恢复原文本
        setTimeout(() => {
          event.target.textContent = originalText;
          event.target.style.color = originalColor;
        }, 1000);
      }).catch(err => {
        console.error('复制失败:', err);
        showCustomAlert('复制失败，请手动复制', 'error');
      });
    }
    
    // 复制密码文本
    function copyPasswordText(event) {
      event.stopPropagation();
      const passwordText = event.target.textContent;
      
      if (!passwordText) return;
      
      // 复制到剪贴板
      navigator.clipboard.writeText(passwordText).then(() => {
        // 显示复制成功提示
        const originalText = event.target.textContent;
        event.target.textContent = '✓ 已复制';
        event.target.style.color = '#34c759';
        
        // 1秒后恢复原文本
        setTimeout(() => {
          event.target.textContent = originalText;
          event.target.style.color = '';
        }, 1000);
      }).catch(err => {
        console.error('复制失败:', err);
        showCustomAlert('复制失败，请手动复制', 'error');
      });
    }
    
    // 下拉菜单控制
    function toggleAddAccountMenu(event) {
      event.stopPropagation();
      const menu = document.getElementById('addAccountMenu');
      menu.classList.toggle('show');
      
      // 重新初始化图标
      setTimeout(() => {
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }, 0);
    }

    function hideAddAccountMenu() {
      const menu = document.getElementById('addAccountMenu');
      menu.classList.remove('show');
    }

    // 导出账号下拉菜单控制
    function toggleExportMenu(event) {
      event.stopPropagation();
      const menu = document.getElementById('exportAccountMenu');
      menu.classList.toggle('show');
      
      // 重新初始化图标
      setTimeout(() => {
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }, 0);
    }

    function hideExportMenu() {
      const menu = document.getElementById('exportAccountMenu');
      menu.classList.remove('show');
    }

    // 点击页面其他地方关闭下拉菜单
    document.addEventListener('click', (event) => {
      const addMenu = document.getElementById('addAccountMenu');
      const addBtn = document.getElementById('addAccountBtn');
      if (addMenu && !addMenu.contains(event.target) && !addBtn.contains(event.target)) {
        hideAddAccountMenu();
      }
      
      const exportMenu = document.getElementById('exportAccountMenu');
      const exportBtn = document.getElementById('exportAccountBtn');
      if (exportMenu && !exportMenu.contains(event.target) && !exportBtn.contains(event.target)) {
        hideExportMenu();
      }
    });
    
    // 页面加载完成后初始化Lucide图标
    document.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons();
      
      // 加载配置文件路径
      if (typeof loadFilePaths === 'function') {
        loadFilePaths();
      }
      
      // 初始化域名管理器
      if (typeof initDomainManager === 'function') {
        initDomainManager();
      }
    });
  </script>
  <script src="renderer.js"></script>
</body>
</html>
